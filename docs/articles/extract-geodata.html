<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract Geodata from different sources • gisr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Extract Geodata from different sources">
<meta property="og:description" content="gisr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gisr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create-terrain-basemap.html">Create Terrain Basemap</a>
    </li>
    <li>
      <a href="../articles/extract-geodata.html">Extract Geodata from different sources</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USAID-OHA-SI/gisr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="extract-geodata_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Extract Geodata from different sources</h1>
                        <h4 class="author">Baboyma Kagniniwa</h4>
            
            <h4 class="date">2021-09-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USAID-OHA-SI/gisr/blob/master/vignettes/extract-geodata.Rmd"><code>vignettes/extract-geodata.Rmd</code></a></small>
      <div class="hidden name"><code>extract-geodata.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This vignette provides some guidance to USAID/OHA Data Analysts on how to extract geospatial data from different sources</p>
</div>
<div id="geospatial-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#geospatial-datasets" class="anchor"></a>Geospatial Datasets</h2>
<p>PEPFAR/ICPI GIS Cluster provides a global geospatial data set that define the boundaries of PEPFAR countries organizational units. This data set contains all country, SNU, PSNU and Community boundaries along with their respective unique identification id (uid) and have been used thematic mapping and other spatial analyses. Other external data sources such as <a href="https://www.naturalearthdata.com/downloads/">Naturalearh</a> and <a href="https://gadm.org/download_country_v3.html">GADM</a> have also been very helpful.</p>
<p>Below are different ways analysts could / should be using this package to extract PEPFAR geodata for their respective countries.</p>
</div>
<div id="prerequisites" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/glamr">glamr</a></span><span class="op">)</span>         <span class="co"># OHA/SI utility package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USAID-OHA-SI/gisr">gisr</a></span><span class="op">)</span>          <span class="co"># OHA/SI geospatial package </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>            <span class="co"># Spatial data management</span></code></pre></div>
</div>
<div id="locate-and-setup-vector-data-path" class="section level2">
<h2 class="hasAnchor">
<a href="#locate-and-setup-vector-data-path" class="anchor"></a>Locate and setup vector data path</h2>
<p>Current PEPFAR Geospatial data sets can be found under OHA/SI Google Drive <code>SI Folder</code> and in <code>Spatial Files</code> sub-folder.</p>
<p>In order to take full advantage of all the OHA/SI R packages, it’s recommended to setup the location of your data directories. These should ideally be outside your github projects directory. One of the directories should be dedicated to geospatial data and should be set using <code><a href="https://rdrr.io/pkg/glamr/man/set_paths.html">glamr::set_paths(folderpath_vector = "&lt;my-geodata-folder&gt;")</a></code>.</p>
<p>Below is an example. This assumes your R / Github projects folder is under <code>Documents</code> folder on your local computer and your working off a R Project in a sub-folder. In this example, your geospatial data folder will be a sibling of your R / Github projects folder.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">curr_path</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/&lt;username&gt;/Documents/projects/gisr"</span> <span class="co"># Windows</span>
<span class="co">#or </span>
<span class="co">#curr_path &lt;- "~/Documents/projects/gisr"                  # Mac or linux</span>

<span class="va">geopath</span> <span class="op">&lt;-</span> <span class="st">"../../Geodata"</span>

<span class="fu">glamr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/glamr/man/set_paths.html">set_paths</a></span><span class="op">(</span>folderpath_vector <span class="op">=</span> <span class="va">geopath</span><span class="op">)</span>

<span class="co"># verify path</span>
<span class="fu">glamr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/glamr/man/si_path.html">si_path</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"path_vector"</span><span class="op">)</span></code></pre></div>
<p>The geospatial data path is now set. Download PEPFAR <code>VcPepfarPolygons.shp</code> file from the above mentioned Google Drive to the newly set local folder.</p>
</div>
<div id="read-geospatial-data" class="section level2">
<h2 class="hasAnchor">
<a href="#read-geospatial-data" class="anchor"></a>Read geospatial data</h2>
<p>Time to test some of the <code>gisr</code> functions. Let</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># this works for the perfect setup with the default parameters values</span>
<span class="va">spdf_pepfar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vcpolygons.html">get_vcpolygons</a></span><span class="op">(</span><span class="op">)</span> 

<span class="co"># for custom use, you will need to specify the path and name of the file</span>
<span class="va">spdf_pepfar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vcpolygons.html">get_vcpolygons</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"../myshapefiles"</span>, name <span class="op">=</span> <span class="st">"pepfar.shp"</span><span class="op">)</span>

<span class="co"># Explore outputs</span>
<span class="va">spdf_pepfar</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">spdf_pepfar</span></code></pre></div>
<p>Now that the PEPFAR Boundaries shapefile can be accessed and read in R, how does one extract specific boundaries for their countries?</p>
</div>
<div id="extract-country-orgunit-boundaries" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-country-orgunit-boundaries" class="anchor"></a>Extract country orgunit boundaries</h2>
<p>In order to extract country specific boundaries, you will need to provide the country name and the orgunit level. Below is an example for South Africa.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cntry</span> <span class="op">&lt;-</span> <span class="st">"South Africa"</span></code></pre></div>
<p>Extract country boundaries</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cntry_lvl</span> <span class="op">&lt;-</span> <span class="fu">glamr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/glamr/man/get_ouorglevel.html">get_ouorglevel</a></span><span class="op">(</span>
  operatingunit <span class="op">=</span> <span class="va">cntry</span>,
  country <span class="op">=</span> <span class="va">cntry</span>,
  org_type <span class="op">=</span> <span class="st">"country"</span>
<span class="op">)</span>

<span class="co"># Country boundaries</span>
<span class="va">spdf_cntry</span> <span class="op">&lt;-</span> <span class="va">spdf_pepfar</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/extract_boundaries.html">extract_boundaries</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">cntry</span>, 
                     level <span class="op">=</span> <span class="va">cntry_lvl</span><span class="op">)</span>

<span class="va">spdf_cntry</span></code></pre></div>
<p>Extract PSNU boundaries</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">psnu_lvl</span> <span class="op">&lt;-</span> <span class="fu">glamr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/glamr/man/get_ouorglevel.html">get_ouorglevel</a></span><span class="op">(</span>
  operatingunit <span class="op">=</span> <span class="va">cntry</span>,
  country <span class="op">=</span> <span class="va">cntry</span>,
  org_type <span class="op">=</span> <span class="st">"prioritization"</span>
<span class="op">)</span>

<span class="co"># psnu boundaries</span>
<span class="va">spdf_psnu</span> <span class="op">&lt;-</span> <span class="va">spdf_pepfar</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/extract_boundaries.html">extract_boundaries</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">cntry</span>, level <span class="op">=</span> <span class="va">cntry_lvl</span><span class="op">)</span>

<span class="va">spdf_psnu</span></code></pre></div>
</div>
<div id="download-pre-parsed-geodata" class="section level2">
<h2 class="hasAnchor">
<a href="#download-pre-parsed-geodata" class="anchor"></a>Download pre-parsed geodata</h2>
<p>PEPFAR Geospatial dataset have already been parsed out and can be downloaded to a local directory.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Download country boundaries</span>
<span class="fu"><a href="../reference/download_shapefiles.html">download_shapefiles</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">cntry</span>, org_label <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span>

<span class="co"># Download PSNU boundaries</span>
<span class="fu"><a href="../reference/download_shapefiles.html">download_shapefiles</a></span><span class="op">(</span>country <span class="op">=</span> <span class="va">cntry</span>, org_label <span class="op">=</span> <span class="st">"prioritization"</span><span class="op">)</span></code></pre></div>
</div>
<div id="extract-data-from-other-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-data-from-other-sources" class="anchor"></a>Extract Data from other sources</h2>
<p>Contextual geospatial data sets can also be extracted from external sources using <code><a href="../reference/get_admin0.html">get_admin0()</a></code>, <code><a href="../reference/get_admin1.html">get_admin1()</a></code>, <code><a href="../reference/get_adm_boundaries.html">get_adm_boundaries()</a></code></p>
</div>
<div id="export-geospatial-data-to-local-drive" class="section level2">
<h2 class="hasAnchor">
<a href="#export-geospatial-data-to-local-drive" class="anchor"></a>Export Geospatial Data to local drive</h2>
<p>Take a look at <code><a href="../reference/export_spdf.html">export_spdf()</a></code></p>
<div id="thank-you" class="section level3">
<h3 class="hasAnchor">
<a href="#thank-you" class="anchor"></a>Thank you!</h3>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Baboyma Kagniniwa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
